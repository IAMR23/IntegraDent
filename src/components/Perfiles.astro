---
// DoctorCarousel.astro
---

<div
  class="w-full bg-gray-800 min-h-screen flex flex-col justify-center items-center relative overflow-hidden"
>
  <!-- Carrusel -->
  <div class="w-full max-w-4xl mx-auto px-4">
    <!-- Slide 1 - Visible -->
    <div class="flex flex-col items-center py-16 text-center" id="slide-1">
      <div
        class="rounded-full border-2 border-white w-40 h-40 overflow-hidden mb-6"
      >
        <img
          src="/api/placeholder/160/160"
          alt="Doctora Alexandra Fierro"
          class="w-full h-full object-cover"
        />
      </div>
      <h2 class="text-white text-2xl md:text-3xl font-medium mb-3">
        Especialista en Diseño de Sonrisa
      </h2>
      <h3 class="text-yellow-400 text-xl font-medium">Dra. Alexandra Fierro</h3>
    </div>

    <!-- Slide 2 - Oculto -->
    <div class="hidden flex-col items-center py-16 text-center" id="slide-2">
      <div
        class="rounded-full border-2 border-white w-40 h-40 overflow-hidden mb-6"
      >
        <img
          src="/api/placeholder/160/160"
          alt="Dr. Carlos Méndez"
          class="w-full h-full object-cover"
        />
      </div>
      <h2 class="text-white text-2xl md:text-3xl font-medium mb-3">
        Especialista en Ortodoncia
      </h2>
      <h3 class="text-yellow-400 text-xl font-medium">Dr. Carlos Méndez</h3>
    </div>

    <!-- Slide 3 - Oculto -->
    <div class="hidden flex-col items-center py-16 text-center" id="slide-3">
      <div
        class="rounded-full border-2 border-white w-40 h-40 overflow-hidden mb-6"
      >
        <img
          src="/api/placeholder/160/160"
          alt="Dra. María López"
          class="w-full h-full object-cover"
        />
      </div>
      <h2 class="text-white text-2xl md:text-3xl font-medium mb-3">
        Especialista en Odontopediatría
      </h2>
      <h3 class="text-yellow-400 text-xl font-medium">Dra. María López</h3>
    </div>
  </div>

  <!-- Botones de navegación -->
  <button
    class="absolute left-4 top-1/2 -translate-y-1/2 bg-white bg-opacity-30 rounded-full p-3 hover:bg-opacity-50 transition-all"
    id="prev-btn"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="white"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <polyline points="15 18 9 12 15 6"></polyline>
    </svg>
  </button>
  <button
    class="absolute right-4 top-1/2 -translate-y-1/2 bg-white bg-opacity-30 rounded-full p-3 hover:bg-opacity-50 transition-all"
    id="next-btn"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="white"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </button>

  <!-- Indicadores -->
  <div class="flex space-x-2 mt-6">
    <button class="w-3 h-3 rounded-full bg-white opacity-60" data-slide="1"
    ></button>
    <button class="w-3 h-3 rounded-full bg-white opacity-60" data-slide="2"
    ></button>
    <button class="w-3 h-3 rounded-full bg-yellow-400" data-slide="3"></button>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const slides = document.querySelectorAll('[id^="slide-"]');
    const indicators = document.querySelectorAll("[data-slide]");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");
    let currentSlide = 1;
    const totalSlides = slides.length;
    let interval;

    function showSlide(slideNumber: any) {
      slides.forEach((slide, index) => {
        slide.classList.add("hidden");
        slide.classList.remove("flex");
        if (indicators[index]) {
          indicators[index].classList.remove("bg-yellow-400");
          indicators[index].classList.add("bg-white", "opacity-60");
        }
      });
      slides[slideNumber - 1].classList.remove("hidden");
      slides[slideNumber - 1].classList.add("flex");
      indicators[slideNumber - 1].classList.remove("bg-white", "opacity-60");
      indicators[slideNumber - 1].classList.add("bg-yellow-400");
      currentSlide = slideNumber;
    }

    function nextSlide() {
      let nextSlide = currentSlide + 1;
      if (nextSlide > totalSlides) nextSlide = 1;
      showSlide(nextSlide);
    }

    function startAutoSlide() {
      interval = setInterval(nextSlide, 3000);
    }

    if (prevBtn)
      prevBtn.addEventListener("click", () => {
        let prevSlide = currentSlide - 1;
        if (prevSlide < 1) prevSlide = totalSlides;
        showSlide(prevSlide);
      });

    if (nextBtn)
      nextBtn.addEventListener("click", () => {
        nextSlide();
      });

    indicators.forEach((indicator) => {
      indicator.addEventListener("click", () => {
        const slideNumber = parseInt(
          indicator.getAttribute("data-slide") ?? "1"
        );
        showSlide(slideNumber);
      });
    });

    showSlide(1);
    startAutoSlide();
  });
</script>
